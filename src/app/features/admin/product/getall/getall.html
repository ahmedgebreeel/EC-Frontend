<div class="admin-container">
  <!-- Header Section -->
  <div class="admin-header">
    <div class="header-content">
      <div class="header-left">
        <h1 class="page-title">Product Management</h1>
        <p class="page-subtitle">Manage your product inventory and listings</p>
      </div>
      <div class="header-right">
        <a routerLink="/admin/products/add" class="btn btn-primary">
          <i class="fas fa-plus-circle"></i>
          <span>Add New Product</span>
        </a>
      </div>
    </div>
  </div>

  <!-- Search Section -->
  <div class="controls-section">
    <div class="search-bar">
      <i class="fas fa-search search-icon"></i>
      <input 
        type="text" 
        placeholder="Search by product name, description, category, or ID..."
        class="search-input"
        [value]="searchQuery()"
        (input)="onSearchChange($event)">
      @if (searchQuery()) {
        <button class="clear-search" (click)="clearSearch()">
          <i class="fas fa-times"></i>
        </button>
      }
    </div>
    <div class="filter-actions">
      <span class="product-count">
        <i class="fas fa-box"></i>
        {{ productCount() }} Products
      </span>
    </div>
  </div>

  <!-- Products Table -->
  <div class="table-container">
    @if (filteredProducts().length > 0) {
      <table class="products-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Image</th>
            <th>Product Name</th>
            <th>Category</th>
            <th>Price</th>
            <th>Stock</th>
            <th>Status</th>
            <th>Created Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (product of filteredProducts(); track product.id) {
            <tr class="table-row">
              <td>
                <span class="product-id">#{{ product.id }}</span>
              </td>
              <td>
                <img 
                  [src]="product.imageUrl" 
                  [alt]="product.name" 
                  class="product-image">
              </td>
              <td>
                <div class="product-name-cell">
                  <h5>{{ product.name }}</h5>
                  <p class="product-description">{{ product.description }}</p>
                </div>
              </td>
              <td>
                <span class="category-badge">{{ product.category }}</span>
              </td>
              <td>
                <span class="price-text">\${{ product.price | number:'1.2-2' }}</span>
              </td>
              <td>
                <span class="stock-number">{{ product.stock }}</span>
              </td>
              <td>
                <span class="stock-badge" [ngClass]="getStockBadgeClass(product.status)">
                  {{ product.status }}
                </span>
              </td>
              <td>
                <span class="date-text">{{ product.createdDate }}</span>
              </td>
              <td>
                <div class="action-buttons">
                  <a 
                    [routerLink]="['/admin/products/edit', product.id]" 
                    class="btn-icon btn-edit" 
                    title="Edit Product">
                    <i class="fas fa-edit"></i>
                  </a>
                  <button 
                    class="btn-icon btn-delete" 
                    title="Delete Product"
                    (click)="deleteProduct(product.id)">
                    <i class="fas fa-trash-alt"></i>
                  </button>
                </div>
              </td>
            </tr>
          }
        </tbody>
      </table>
    } @else {
      <div class="empty-state">
        <i class="fas fa-box-open"></i>
        <h3>No products found</h3>
        <p>
          @if (searchQuery()) {
            Try adjusting your search terms
          } @else {
            Get started by adding your first product
          }
        </p>
        @if (!searchQuery()) {
          <a routerLink="/admin/products/add" class="btn btn-primary">
            <i class="fas fa-plus-circle"></i>
            Add Your First Product
          </a>
        }
      </div>
    }
  </div>
</div>
