<main class="main">

  <!-- Page Title -->
  <div class="page-title light-background">
    <div class="container d-lg-flex justify-content-between align-items-center">
      <h1 class="mb-2 mb-lg-0">Order Confirmation</h1>
      <nav class="breadcrumbs">
        <ol>
          <li><a routerLink="/home">Home</a></li>
          <li class="current">Order Confirmation</li>
        </ol>
      </nav>
    </div>
  </div><!-- End Page Title -->

  <!-- Order Confirmation Section -->
  <section id="order-confirmation" class="order-confirmation section">

    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="order-confirmation-3">
        <div class="row g-0">
          <!-- Left sidebar with order summary -->
          <div class="col-lg-4 sidebar" data-aos="fade-right">
            <div class="sidebar-content">
              <!-- Success animation -->
              <div class="success-animation">
                <i class="bi bi-check-lg"></i>
              </div>

              <!-- Order number and date -->
              <div class="order-id">
                <h4>Order #{{ order?.id }}</h4>
                <div class="order-date">{{ order?.created | date:'MMMM d, y' }}</div>
              </div>

              <!-- Order progress stepper -->
              <div class="order-progress">
                <div class="stepper-container">
                  <div class="stepper-item current">
                    <div class="stepper-icon">
                      <i class="bi bi-clock-history"></i>
                    </div>
                    <div class="stepper-text">
                      <h6>Pending</h6>
                      <span>Order Received</span>
                    </div>
                  </div>
                  <div class="stepper-item">
                    <div class="stepper-icon">
                      <i class="bi bi-bag-check"></i>
                    </div>
                    <div class="stepper-text">
                      <h6>Confirmed</h6>
                      <span>Payment Verified</span>
                    </div>
                  </div>
                  <div class="stepper-item">
                    <div class="stepper-icon">
                      <i class="bi bi-box-seam"></i>
                    </div>
                    <div class="stepper-text">
                      <h6>Processing</h6>
                      <span>Items Packaging</span>
                    </div>
                  </div>
                  <div class="stepper-item">
                    <div class="stepper-icon">
                      <i class="bi bi-truck"></i>
                    </div>
                    <div class="stepper-text">
                      <h6>Shipped</h6>
                      <span>In Transit</span>
                    </div>
                  </div>
                  <div class="stepper-item">
                    <div class="stepper-icon">
                      <i class="bi bi-house-check"></i>
                    </div>
                    <div class="stepper-text">
                      <h6>Delivered</h6>
                      <span>Order Arrived</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Price summary -->
              <div class="price-summary">
                <h5>Order Summary</h5>
                <ul class="summary-list">
                  <li>
                    <span>Subtotal</span>
                    <span>{{ order?.subtotal | number:'1.2-2' }} <span class="currency-suffix">EGP</span></span>
                  </li>
                  <li>
                    <span>Shipping</span>
                    <span>{{ order?.shippingFees | number:'1.2-2' }} <span class="currency-suffix">EGP</span></span>
                  </li>
                  <li>
                    <span>Tax</span>
                    <span>{{ order?.taxes | number:'1.2-2' }} <span class="currency-suffix">EGP</span></span>
                  </li>
                  <li class="total">
                    <span>Total</span>
                    <span>{{ order?.totalAmount | number:'1.2-2' }} <span class="currency-suffix">EGP</span></span>
                  </li>
                </ul>
              </div>

              <!-- Delivery info -->
              <div class="delivery-info">
                <h5>Delivery Information</h5>
                <p class="delivery-estimate">
                  <i class="bi bi-calendar-check"></i>
                  <span>Estimated delivery: {{ order?.estimatedDeliveryDateStart | date:'MMM d' }} - {{
                    order?.estimatedDeliveryDateEnd | date:'MMM d, y' }}</span>
                </p>
                <p class="shipping-method">
                  <i class="bi bi-truck"></i>
                  <span>{{ order?.shippingMethod | titlecase }} Shipping</span>
                </p>
              </div>

              <!-- Customer service -->
              <div class="customer-service">
                <h5>Need Help?</h5>
                <a routerLink="/contact-us" class="help-link">
                  <i class="bi bi-chat-dots"></i>
                  <span>Contact Support</span>
                </a>
                <a routerLink="/faq" class="help-link">
                  <i class="bi bi-question-circle"></i>
                  <span>FAQs</span>
                </a>
              </div>
            </div>
          </div>

          <!-- Main content area -->
          <div class="col-lg-8 main-content" data-aos="fade-in">
            <!-- Thank you message -->
            <div class="thank-you-message">
              <h1>Thanks for your order!</h1>
              <p>We've received your order and will begin processing it right away.
                We'll send you updates via email as your order progresses.</p>
            </div>

            <!-- Shipping details -->
            <div class="details-card" data-aos="fade-up">
              <div class="card-header" data-toggle="collapse">
                <h3>
                  <i class="bi bi-geo-alt"></i>
                  Shipping Details
                </h3>
                <i class="bi bi-chevron-down toggle-icon"></i>
              </div>
              <div class="card-body">
                <div class="row">
                  <!-- Shipping Column -->
                  <div class="col-md-7">
                    <div class="detail-group">
                      <label>Ship To</label>
                      <div class="address-details">
                        <p class="address-line">
                          <i class="bi bi-shop me-2"></i>
                          <span>{{ order?.shippingAddress?.street }}, {{ order?.shippingAddress?.building }}</span>
                        </p>
                        <p class="address-line">
                          <i class="bi bi-geo me-2"></i>
                          <span>{{ order?.shippingAddress?.district }}</span>
                        </p>
                        <p class="address-line">
                          <i class="bi bi-geo-alt me-2"></i>
                          <span>{{ order?.shippingAddress?.city }}, {{ order?.shippingAddress?.governorate }}</span>
                        </p>
                        <p class="address-line">
                          <i class="bi bi-mailbox me-2"></i>
                          <span>Zip: {{ order?.shippingAddress?.zipCode }}</span>
                        </p>
                        <p class="address-line">
                          <i class="bi bi-globe-americas me-2"></i>
                          <span>{{ order?.shippingAddress?.country }}</span>
                        </p>
                        @if (order?.shippingAddress?.hints) {
                        <p class="address-hints mt-2">
                          <i class="bi bi-info-circle-fill me-2"></i>
                          <span>{{ order?.shippingAddress?.hints }}</span>
                        </p>
                        }
                      </div>
                    </div>
                  </div>

                  <!-- Contact Column -->
                  <div class="col-md-5">
                    <div class="detail-group">
                      <label>Contact Info</label>
                      <div class="contact-info">
                        <p>
                          <i class="bi bi-person"></i>
                          {{ order?.shippingAddress?.fullName }}
                        </p>
                        <p>
                          <i class="bi bi-telephone"></i>
                          <span>+20 {{ order?.shippingAddress?.mobileNumber }}</span>
                        </p>
                        <p>
                          <i class="bi bi-envelope"></i>
                          {{ order?.userEmail }}
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Payment details -->
            <div class="details-card" data-aos="fade-up">
              <div class="card-header" data-toggle="collapse">
                <h3>
                  <i class="bi bi-credit-card"></i>
                  Payment Details
                </h3>
                <i class="bi bi-chevron-down toggle-icon"></i>
              </div>
              <div class="card-body">
                <div class="payment-method">
                  <div class="payment-icon">
                    <i class="bi" [ngClass]="{
                        'bi-cash-stack': order?.paymentMethod === 'cashOnDelivery',
                        'bi-credit-card': order?.paymentMethod === 'stripe',
                        'bi-wallet2': order?.paymentMethod === 'paymob'
                      }"></i>
                  </div>
                  <div class="payment-details">
                    <div class="card-type">
                      {{ order?.paymentMethod === 'cashOnDelivery' ? 'Cash on Delivery' :
                      order?.paymentMethod === 'stripe' ? 'Credit / Debit Card' : 'Online Payment' }}
                    </div>
                  </div>
                </div>
                <div class="billing-address mt-4">
                  <h5>Billing Address</h5>
                  <p>Same as shipping address</p>
                </div>
              </div>
            </div>

            <!-- Order items -->
            <div class="details-card" data-aos="fade-up">
              <div class=" card-header" data-toggle="collapse">
                <h3>
                  <i class="bi bi-bag-check"></i>
                  Order Items ({{ order?.itemsCount }} Item{{ order?.itemsCount !== 1 ? 's' : '' }})
                </h3>
                <i class="bi bi-chevron-down toggle-icon"></i>
              </div>
              <div class="card-body">
                @for (item of order?.items; track item.productId) {
                <div class="order-item d-flex justify-content-between align-items-center mb-3">
                  <div class="d-flex align-items-center">
                    <div class="order-item-image me-3">
                      <img [src]="item.productThumbnailUrl" [alt]="item.productName" class="img-fluid" loading="lazy">
                    </div>
                    <div class="order-item-details">
                      <h4 class="mb-2">{{ item.productName }}</h4>
                      <div class="order-item-price">
                        <span class="quantity">{{ item.quantity }} Ã— </span>
                        <span class="price">{{ item.productPrice | number:'1.2-2' }} <span
                            class="currency-suffix">EGP</span></span>
                      </div>
                    </div>
                  </div>
                  <div class="order-item-total fw-bold text-end">
                    <span>{{ item.total | number:'1.2-2' }} <span class="currency-suffix">EGP</span></span>
                  </div>
                </div>
                }
              </div>
            </div>

            <!-- Action buttons -->
            <div class="action-area" data-aos="fade-up">
              <div class="row g-3">
                <div class="col-md-6">
                  <a routerLink="/products" class="btn btn-back">
                    <i class="bi bi-arrow-left"></i>
                    Return to Shop
                  </a>
                </div>
                <div class="col-md-6">
                  <a routerLink="/account" class="btn btn-account">
                    <span>View in Account</span>
                    <i class="bi bi-arrow-right"></i>
                  </a>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

    </div>

  </section><!-- /Order Confirmation Section -->

</main>