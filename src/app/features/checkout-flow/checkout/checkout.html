<main class="main">

  <!-- Page Title -->
  <div class="page-title light-background">
    <div class="container d-lg-flex justify-content-between align-items-center">
      <h1 class="mb-2 mb-lg-0">Checkout</h1>
      <nav class="breadcrumbs">
        <ol>
          <li><a routerLink="/home">Home</a></li>
          <li class="current">Checkout</li>
        </ol>
      </nav>
    </div>
  </div><!-- End Page Title -->

  <!-- Checkout Section -->
  <section id="checkout" class="checkout section">

    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="row">
        <div class="col-lg-7">
          <!-- Checkout Form -->
          <div class="checkout-container" data-aos="fade-up">
            <form class="checkout-form">
              <!-- Shipping Address -->
              <div class="checkout-section" id="shipping-address">
                <div class="section-header">
                  <div class="section-number">1</div>
                  <h3>Shipping Address</h3>
                </div>
                <div class="section-content">
                  <!-- No Address State -->
                  @if (addresses.length === 0) {
                  <div class="empty-address-state text-center">
                    <div class="empty-icon-container">
                      <i class="bi bi-geo-alt"></i>
                    </div>
                    <h5>No Shipping Address Found</h5>
                    <p class="text-muted mb-4">Please add a delivery address to proceed with your order.</p>
                    <button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#addressModal">
                      <i class="bi bi-plus-lg me-2"></i> Add New Address
                    </button>
                  </div>
                  }


                  <!-- Default Address Display -->
                  @if (currentAddress) {
                  <div class="default-address-display" id="defaultAddressDisplay">
                    <div class="selected-address-card">
                      <div class="address-card-header">
                        <div class="header-left">
                          <i class="bi bi-geo-alt-fill"></i>
                          <span class="address-label">{{currentAddress.label}}</span>
                          @if (currentAddress.isDefault) {
                          <span class="default-badge">Default</span>
                          }
                        </div>
                        <div class="header-actions">
                          <button type="button" class="btn-change-address me-2" data-bs-toggle="modal"
                            data-bs-target="#addressModal">
                            <i class="bi bi-plus-lg me-1"></i> Add New
                          </button>
                          <button type="button" class="btn-change-address" data-bs-toggle="collapse"
                            data-bs-target="#otherAddressesContainer" aria-expanded="false"
                            aria-controls="otherAddressesContainer">
                            <i class="bi bi-pencil me-1"></i> Change
                          </button>
                        </div>
                      </div>
                      <div class="address-card-body">
                        <div class="row">
                          <div class="col-md-6">
                            <p class="address-name"><i class="bi bi-person-fill"></i> {{currentAddress.fullName}}</p>
                            <p class="address-phone"><i class="bi bi-telephone-fill"></i><span>+20
                                {{currentAddress.mobileNumber}}</span></p>
                          </div>
                          <div class="col-md-6">
                            <div class="address-details">
                              <p class="address-line">
                                <i class="bi bi-shop text-secondary me-2"></i>
                                <span>{{currentAddress.street}}, {{currentAddress.building}}</span>
                              </p>
                              <p class="address-line">
                                <i class="bi bi-geo text-secondary me-2"></i>
                                <span>{{currentAddress.district}}</span>
                              </p>
                              <p class="address-line">
                                <i class="bi bi-geo-alt text-secondary me-2"></i>
                                <span>{{currentAddress.city}}, {{currentAddress.governorate}}</span>
                              </p>
                              @if (currentAddress.zipCode) {
                              <p class="address-line">
                                <i class="bi bi-mailbox text-secondary me-2"></i>
                                <span><span
                                    class="text-xs text-uppercase fw-bold text-muted me-1">Zip:</span>{{currentAddress.zipCode}}</span>
                              </p>
                              }
                              <p class="address-line">
                                <i class="bi bi-globe-americas text-secondary me-2"></i>
                                <span>{{currentAddress.country}}</span>
                              </p>
                              @if (currentAddress.hints) {
                              <p class="address-hints mt-2">
                                <i class="bi bi-info-circle-fill text-accent me-2"></i>
                                <span>{{currentAddress.hints}}</span>
                              </p>
                              }
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  }

                  <!-- Other Saved Addresses (collapsible) -->
                  <div class="collapse" id="otherAddressesContainer">
                    <div class="saved-addresses-container" id="savedAddressesContainer">
                      <h6 class="saved-addresses-title mb-3">
                        <i class="bi bi-geo-alt me-2"></i>Choose a Different Address
                      </h6>
                      <div class="saved-addresses-grid">
                        <!-- Saved Address Item -->
                        @for (address of addresses; track address.id) {
                        <div class="saved-address-card" [class.selected]="tempSelectedAddress?.id === address.id"
                          (click)="selectAddress(address)">
                          <input type="radio" name="savedAddress" [id]="'address' + address.id"
                            [checked]="tempSelectedAddress?.id === address.id" class="address-radio">
                          <label [for]="'address' + address.id" class="address-card-content">
                            <div class="address-card-header">
                              <span class="address-label">{{address.label}}</span>
                              @if (address.isDefault) {
                              <span class="default-badge">Default</span>
                              }
                            </div>
                            <div class="address-card-body">
                              <p class="address-name"><i class="bi bi-person-fill"></i> {{address.fullName}}</p>
                              <div class="address-details">
                                <p class="address-line">
                                  <i class="bi bi-shop text-secondary me-2"></i>
                                  <span>{{address.street}}, {{address.building}}</span>
                                </p>
                                <p class="address-line">
                                  <i class="bi bi-geo text-secondary me-2"></i>
                                  <span>{{address.district}}</span>
                                </p>
                                <p class="address-line">
                                  <i class="bi bi-geo-alt text-secondary me-2"></i>
                                  <span>{{address.city}}, {{address.governorate}}</span>
                                </p>
                                @if (address.zipCode) {
                                <p class="address-line">
                                  <i class="bi bi-mailbox text-secondary me-2"></i>
                                  <span><span
                                      class="text-xs text-uppercase fw-bold text-muted me-1">Zip:</span>{{address.zipCode}}</span>
                                </p>
                                }
                                <p class="address-line">
                                  <i class="bi bi-globe-americas text-secondary me-2"></i>
                                  <span>{{address.country}}</span>
                                </p>
                                @if (address.hints) {
                                <p class="address-hints mt-2">
                                  <i class="bi bi-info-circle-fill text-accent me-2"></i>
                                  <span>{{address.hints}}</span>
                                </p>
                                }
                              </div>
                              <p class="address-phone"><i class="bi bi-telephone-fill"></i> <span>+20
                                  {{address.mobileNumber}}</span></p>
                            </div>
                          </label>
                        </div>
                        }
                      </div>

                      <!-- Save Button -->
                      <div class="d-flex justify-content-end mt-4">
                        <button type="button" class="btn btn-save-address" (click)="saveSelectedAddress()">
                          <i class="bi bi-check-lg me-2"></i>Save Selection
                        </button>
                      </div>

                    </div>
                  </div>

                </div>
              </div>

              <!-- Payment Method -->
              <div class="checkout-section" id="payment-method">
                <div class="section-header">
                  <div class="section-number">2</div>
                  <h3>Payment Method</h3>
                </div>
                <div class="section-content">
                  <div class="payment-options">
                    <div class="payment-option" [class.active]="selectedPaymentMethod === 'stripe'"
                      (click)="setPaymentMethod('stripe')">
                      <input type="radio" name="payment-method" id="credit-card"
                        [checked]="selectedPaymentMethod === 'stripe'">
                      <label for="credit-card">
                        <span class="payment-icon"><i class="bi bi-credit-card-2-front"></i></span>
                        <span class="payment-label">Credit / Debit Card (Stripe)</span>
                      </label>
                    </div>
                    <div class="payment-option" [class.active]="selectedPaymentMethod === 'cashOnDelivery'"
                      (click)="setPaymentMethod('cashOnDelivery')">
                      <input type="radio" name="payment-method" id="cod"
                        [checked]="selectedPaymentMethod === 'cashOnDelivery'">
                      <label for="cod">
                        <span class="payment-icon"><i class="bi bi-cash-stack"></i></span>
                        <span class="payment-label">Cash on Delivery</span>
                      </label>
                    </div>
                  </div>

                  <div class="payment-details" id="credit-card-details" *ngIf="selectedPaymentMethod === 'stripe'">
                    <div class="form-group">
                      <label for="card-number">Card Number</label>
                      <div class="card-number-wrapper">
                        <input type="text" class="form-control" name="card-number" id="card-number"
                          placeholder="1234 5678 9012 3456" required="">
                        <div class="card-icons">
                          <i class="bi bi-credit-card-2-front"></i>
                          <i class="bi bi-credit-card"></i>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6 form-group">
                        <label for="expiry">Expiration Date</label>
                        <input type="text" class="form-control" name="expiry" id="expiry" placeholder="MM/YY"
                          required="">
                      </div>
                      <div class="col-md-6 form-group">
                        <label for="cvv">Security Code (CVV)</label>
                        <div class="cvv-wrapper">
                          <input type="text" class="form-control" name="cvv" id="cvv" placeholder="123" required="">
                          <span class="cvv-hint" data-bs-toggle="tooltip" data-bs-placement="top"
                            title="3-digit code on the back of your card">
                            <i class="bi bi-question-circle"></i>
                          </span>
                        </div>
                      </div>
                    </div>
                    <div class="form-group">
                      <label for="card-name">Name on Card</label>
                      <input type="text" class="form-control" name="card-name" id="card-name" placeholder="John Doe"
                        required="">
                    </div>
                  </div>

                  <div class="payment-details" id="cod-details" *ngIf="selectedPaymentMethod === 'cashOnDelivery'">
                    <div class="alert alert-info d-flex align-items-center mb-0" role="alert">
                      <i class="bi bi-info-circle-fill me-2 fs-5"></i>
                      <div>
                        You can pay in cash when your order is delivered. Please make sure to have the exact amount
                        ready.
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Order Review -->
              <div class="checkout-section" id="order-review">
                <div class="section-header">
                  <div class="section-number">3</div>
                  <h3>Review &amp; Place Order</h3>
                </div>
                <div class="section-content">
                  <div class="form-check terms-check">
                    <input class="form-check-input" type="checkbox" id="terms" name="terms" [(ngModel)]="termsAgreed">
                    <label class="form-check-label" for="terms">
                      I agree to the <a routerLink="/tos" data-bs-toggle="modal" data-bs-target="#termsModal">Terms and
                        Conditions</a> and <a routerLink="/privacy" data-bs-toggle="modal"
                        data-bs-target="#privacyModal">Privacy Policy</a>
                    </label>
                  </div>
                  <div class="success-message d-none">Your order has been placed successfully! Thank you for your
                    purchase.</div>
                  <div class="place-order-container">
                    <button type="button" class="btn btn-primary place-order-btn"
                      [disabled]="!currentAddress || !selectedPaymentMethod || !termsAgreed" (click)="placeOrder()">
                      <span class="btn-text">Place Order</span>
                      <span class="btn-price">{{orderTotal | number:'1.2-2'}} <span
                          class="currency-suffix">EGP</span></span>
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>

        <div class="col-lg-5">
          <!-- Order Summary -->
          <div class="order-summary" data-aos="fade-left" data-aos-delay="200">
            <div class="order-summary-header">
              <h3>Order Summary</h3>
              <span class="item-count">{{checkoutItems.length}} Item{{checkoutItems.length !== 1 ? 's' : ''}}</span>
            </div>

            <div class="order-summary-content">
              <div class="order-items">
                @for (item of checkoutItems; track item.productId) {
                <div class="order-item d-flex justify-content-between align-items-center">
                  <div class="d-flex align-items-center">
                    <div class="order-item-image me-3">
                      <img [src]="item.productThumbnailUrl" [alt]="item.productName" class="img-fluid">
                    </div>
                    <div class="order-item-details">
                      <h4 class="mb-2">{{item.productName}}</h4>
                      <div class="order-item-price">
                        <span class="quantity">{{item.quantity}} Ã—</span>
                        <span class="price">{{item.productPrice | number:'1.2-2'}} <span
                            class="currency-suffix">EGP</span></span>
                      </div>
                    </div>
                  </div>
                  <div class="order-item-total fw-bold text-end">
                    <span>{{item.total | number:'1.2-2'}} <span class="currency-suffix">EGP</span></span>
                  </div>
                </div>
                }
              </div>

              <div class="estimated-arrival">
                <div class="arrival-icon">
                  <i class="bi bi-truck"></i>
                </div>
                <div class="arrival-content">
                  <span class="arrival-label">Estimated Delivery</span>
                  <span class="arrival-date">{{estimatedDeliveryStart}} - {{estimatedDeliveryEnd}}</span>
                </div>
              </div>

              <div class="order-totals">
                <div class="order-subtotal d-flex justify-content-between">
                  <span>Subtotal</span>
                  <span>{{subtotal | number:'1.2-2'}} <span class="currency-suffix">EGP</span></span>
                </div>
                <div class="order-shipping d-flex justify-content-between">
                  <span>Shipping</span>
                  <span>{{shippingFees | number:'1.2-2'}} <span class="currency-suffix">EGP</span></span>
                </div>
                <div class="order-tax d-flex justify-content-between">
                  <span>Tax</span>
                  <span>{{taxes | number:'1.2-2'}} <span class="currency-suffix">EGP</span></span>
                </div>
                <div class="order-total d-flex justify-content-between">
                  <span>Total</span>
                  <span>{{orderTotal | number:'1.2-2'}} <span class="currency-suffix">EGP</span></span>
                </div>
              </div>

              <div class="secure-checkout">
                <div class="secure-checkout-header">
                  <i class="bi bi-shield-lock"></i>
                  <span>Secure Checkout</span>
                </div>
                <div class="payment-icons">
                  <i class="bi bi-credit-card-2-front"></i>
                  <i class="bi bi-credit-card"></i>
                  <i class="bi bi-stripe"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Terms and Privacy Modals -->
      <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="termsModalLabel">Terms and Conditions</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in dui mauris. Vivamus hendrerit arcu
                sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor. Ut in nulla
                enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor.</p>
              <p>Suspendisse in orci enim. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus
                rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non
                venenatis nisl tempor.</p>
              <p>Suspendisse in orci enim. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus
                rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non
                venenatis nisl tempor.</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-bs-dismiss="modal">I Understand</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="privacyModalLabel">Privacy Policy</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in dui mauris. Vivamus hendrerit arcu
                sed erat molestie vehicula. Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor. Ut in nulla
                enim.</p>
              <p>Suspendisse in orci enim. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus
                rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non
                venenatis nisl tempor.</p>
              <p>Suspendisse in orci enim. Vivamus hendrerit arcu sed erat molestie vehicula. Sed auctor neque eu tellus
                rhoncus ut eleifend nibh porttitor. Ut in nulla enim. Phasellus molestie magna non est bibendum non
                venenatis nisl tempor.</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-bs-dismiss="modal">I Understand</button>
            </div>
          </div>
        </div>
      </div>

    </div>

  </section><!-- /Checkout Section -->

  <!-- Address Modal -->
  <div class="modal fade" id="addressModal" tabindex="-1" aria-labelledby="addressModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addressModalLabel">
            <i class="bi bi-geo-alt me-2"></i>
            Add New Address
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form #addressForm="ngForm" class="address-form needs-validation" novalidate>
            <div class="form-group mb-3">
              <label for="modalAddressLabel" class="form-label">Address Label (optional)</label>
              <input type="text" class="form-control" id="modalAddressLabel" name="label" [(ngModel)]="newAddress.label"
                placeholder="e.g., Home, Office, etc." maxlength="50">
            </div>

            <div class="row">
              <div class="col-md-6 form-group mb-3">
                <label for="modalFullName" class="form-label">Full Name *</label>
                <input type="text" class="form-control" id="modalFullName" name="fullName"
                  [(ngModel)]="newAddress.fullName" placeholder="Your full name" required maxlength="50"
                  pattern="[a-zA-Z\s]*" #fullName="ngModel"
                  [class.is-invalid]="fullName.invalid && (fullName.dirty || fullName.touched)">
                <div class="invalid-feedback">
                  @if (fullName.errors?.['required']) {
                  Full name is required.
                  } @else if (fullName.errors?.['pattern']) {
                  Only alphabets and spaces are allowed.
                  }
                </div>
              </div>
              <div class="col-md-6 form-group mb-3">
                <label for="modalPhoneNumber" class="form-label">Phone Number *</label>
                <div class="phone-input-group"
                  [class.border-danger]="mobileNumber.invalid && (mobileNumber.dirty || mobileNumber.touched)">
                  <div class="country-code-display">
                    <img src="https://flagcdn.com/w20/eg.png" alt="EG" class="country-flag" />
                    <span>+20</span>
                  </div>
                  <input type="tel" class="phone-number-input form-control" id="modalPhoneNumber" name="mobileNumber"
                    [(ngModel)]="newAddress.mobileNumber" placeholder="1012 345 678" required maxlength="10"
                    pattern="^(10|11|12|15)[0-9]{8}" #mobileNumber="ngModel">
                </div>
                <!-- Hidden validation trigger/feedback logic for the group -->
                <div class="invalid-feedback"
                  [style.display]="mobileNumber.invalid && (mobileNumber.dirty || mobileNumber.touched) ? 'block' : 'none'">
                  @if (mobileNumber.errors?.['required']) {
                  Phone number is required.
                  } @else {
                  Please enter a valid phone number
                  }
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-8 form-group mb-3">
                <label for="modalStreetAddress" class="form-label">Street Address *</label>
                <input type="text" class="form-control" id="modalStreetAddress" name="street"
                  [(ngModel)]="newAddress.street" placeholder="Street name and number" required maxlength="60"
                  #street="ngModel" [class.is-invalid]="street.invalid && (street.dirty || street.touched)">
                <div class="invalid-feedback">
                  Street address is required.
                </div>
              </div>
              <div class="col-md-4 form-group mb-3">
                <label for="modalBuilding" class="form-label">Building/Apt *</label>
                <input type="text" class="form-control" id="modalBuilding" name="building"
                  [(ngModel)]="newAddress.building" placeholder="Bldg, Apt, etc." required maxlength="50"
                  #building="ngModel" [class.is-invalid]="building.invalid && (building.dirty || building.touched)">
                <div class="invalid-feedback">
                  Building/Apt is required.
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-4 form-group mb-3">
                <label for="modalDistrict" class="form-label">District (optional)</label>
                <input type="text" class="form-control" id="modalDistrict" name="district"
                  [(ngModel)]="newAddress.district" placeholder="District" maxlength="50">
              </div>
              <div class="col-md-4 form-group mb-3">
                <label for="modalCity" class="form-label">City *</label>
                <div class="position-relative">
                  <input type="text" class="form-control" id="modalCity" name="city" [(ngModel)]="newAddress.city"
                    placeholder="City" required #city="ngModel" autocomplete="nope" (input)="onCityInput()"
                    (focus)="onCityInput()" (blur)="hideCitySuggestions()" (keydown)="onKeyDown($event)"
                    [class.is-invalid]="city.invalid && (city.dirty || city.touched)">

                  <ul class="city-suggestions-dropdown" *ngIf="showCitySuggestions">
                    <li *ngFor="let suggestion of filteredCities; let i = index" (mousedown)="selectCity(suggestion)"
                      class="city-suggestion-item" [class.active]="i === highlightedIndex">
                      {{ suggestion }}
                    </li>
                  </ul>
                </div>

                <div class="invalid-feedback"
                  [style.display]="(city.invalid || cityInvalid) && (city.dirty || city.touched) ? 'block' : 'none'">
                  @if (cityInvalid) {
                  Please select a valid city from the list.
                  } @else {
                  City is required.
                  }
                </div>
              </div>
              <div class="col-md-4 form-group mb-3">
                <label for="modalGovernorate" class="form-label">Governorate (optional)</label>
                <input type="text" class="form-control" id="modalGovernorate" name="governorate"
                  [(ngModel)]="newAddress.governorate" placeholder="Governorate" maxlength="50">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 form-group mb-3">
                <label for="modalZipCode" class="form-label">Zip Code (optional)</label>
                <input type="text" class="form-control" id="modalZipCode" name="zipCode"
                  [(ngModel)]="newAddress.zipCode" placeholder="12345" maxlength="50">
              </div>
              <div class="col-md-6 form-group mb-3">
                <label for="modalCountry" class="form-label">Country *</label>
                <div class="position-relative">
                  <input type="text" class="form-control" id="modalCountry" name="country"
                    [(ngModel)]="newAddress.country" placeholder="Country" required #country="ngModel"
                    autocomplete="nope" (input)="onCountryInput()" (focus)="onCountryInput()"
                    (blur)="hideCountrySuggestions()" (keydown)="onCountryKeyDown($event)"
                    [class.is-invalid]="country.invalid && (country.dirty || country.touched)">

                  <ul class="country-suggestions-dropdown city-suggestions-dropdown" *ngIf="showCountrySuggestions">
                    <li *ngFor="let suggestion of filteredCountries; let i = index"
                      (mousedown)="selectCountry(suggestion)" class="city-suggestion-item"
                      [class.active]="i === countryHighlightedIndex">
                      {{ suggestion }}
                    </li>
                  </ul>
                </div>

                <div class="invalid-feedback"
                  [style.display]="(country.invalid || countryInvalid) && (country.dirty || country.touched) ? 'block' : 'none'">
                  @if (countryInvalid) {
                  Please select a supported country from the list.
                  } @else {
                  Country is required.
                  }
                </div>
              </div>
            </div>

            <div class="form-group mb-3">
              <label for="modalHints" class="form-label">Nearest Landmark / Hints (optional)</label>
              <textarea class="form-control" id="modalHints" name="hints" rows="1" [(ngModel)]="newAddress.hints"
                placeholder="Near to..." maxlength="100"></textarea>
            </div>

          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" (click)="saveNewAddress(addressForm)">
            <i class="bi bi-check-lg me-1"></i>
            Use This Address
          </button>
        </div>
      </div>
    </div>
  </div>

</main>